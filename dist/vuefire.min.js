!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.VueFire=n():e.VueFire=n()}(this,function(){return function(e){function n(r){if(i[r])return i[r].exports;var t=i[r]={exports:{},id:r,loaded:!1};return e[r].call(t.exports,t,t.exports,n),t.loaded=!0,t.exports}var i={};return n.m=e,n.c=i,n.p="",n(0)}([function(e,n){function i(e){return"function"==typeof e.key?e.key():e.key}function r(e){return"function"==typeof e.ref?e=e.ref():"object"==typeof e.ref&&(e=e.ref),e}function t(e){return"[object Object]"===Object.prototype.toString.call(e)}function o(e){var n=e.val(),r=t(n)?n:{".value":n};return r[".key"]=i(e),r}function s(e,n){for(var i=0;i<e.length;i++)if(e[i][".key"]===n)return i;return-1}function f(e,n,i){var o=!1,s=null,f=null;if(t(i)&&i.hasOwnProperty("source")&&(o=i.asObject,s=i.cancelCallback,f=i.readyCallback,i=i.source),s||(s=function(){}),!t(i))throw new Error("VueFire: invalid Firebase binding source.");var c=r(i);e.$firebaseRefs[n]=c,e._firebaseSources[n]=i,o?u(e,n,i,s.bind(e)):a(e,n,i,s.bind(e)),f&&i.once("value",f.bind(e))}function c(e,n,i){n in e?e[n]=i:p.util.defineReactive(e,n,i)}function a(e,n,r,t){var f=[];c(e,n,f);var a=r.on("child_added",function(e,n){var i=n?s(f,n)+1:0;f.splice(i,0,o(e))},t),u=r.on("child_removed",function(e){var n=s(f,i(e));f.splice(n,1)},t),l=r.on("child_changed",function(e){var n=s(f,i(e));f.splice(n,1,o(e))},t),b=r.on("child_moved",function(e,n){var r=s(f,i(e)),t=f.splice(r,1)[0],o=n?s(f,n)+1:0;f.splice(o,0,t)},t);e._firebaseListeners[n]={child_added:a,child_removed:u,child_changed:l,child_moved:b}}function u(e,n,i,r){c(e,n,{});var t=i.on("value",function(i){e[n]=o(i)},r);e._firebaseListeners[n]={value:t}}function l(e,n){var i=e._firebaseSources&&e._firebaseSources[n];if(!i)throw new Error('VueFire: unbind failed: "'+n+'" is not bound to a Firebase reference.');var r=e._firebaseListeners[n];for(var t in r)i.off(t,r[t]);e[n]=null,e.$firebaseRefs[n]=null,e._firebaseSources[n]=null,e._firebaseListeners[n]=null}function b(e){e.$firebaseRefs||(e.$firebaseRefs=Object.create(null),e._firebaseSources=Object.create(null),e._firebaseListeners=Object.create(null))}function d(e){p=e,p.mixin(v);var n=p.config.optionMergeStrategies;n.firebase=n.methods,p.prototype.$bindAsObject=function(e,n,i,r){b(this),f(this,e,{source:n,asObject:!0,cancelCallback:i,readyCallback:r})},p.prototype.$bindAsArray=function(e,n,i,r){b(this),f(this,e,{source:n,cancelCallback:i,readyCallback:r})},p.prototype.$unbind=function(e){l(this,e)}}var p,h=function(){var e=this.$options.firebase;if("function"==typeof e&&(e=e.call(this)),e){b(this);for(var n in e)f(this,n,e[n])}},v={created:h,beforeDestroy:function(){if(this.$firebaseRefs){for(var e in this.$firebaseRefs)this.$firebaseRefs[e]&&this.$unbind(e);this.$firebaseRefs=null,this._firebaseSources=null,this._firebaseListeners=null}}};"undefined"!=typeof window&&window.Vue&&d(window.Vue),e.exports=d}])});